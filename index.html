<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Purata Nilai Gred MRSM</title>
    <script>
        function calculatePNG(isFormative) {
            let nama = document.getElementById("nama").value;
            let melayu = parseFloat(document.getElementById("melayu").value);
            let inggeris = parseFloat(document.getElementById("inggeris").value);
            let math = parseFloat(document.getElementById("math").value);
            let sci = parseFloat(document.getElementById("sci").value);
            let reka = parseFloat(document.getElementById("reka").value);
            let islam = parseFloat(document.getElementById("islam").value);
            let sj = parseFloat(document.getElementById("sj").value);
            let geog = parseFloat(document.getElementById("geog").value);
            let ask = isFormative ? null : parseFloat(document.getElementById("ask").value);
            let psv = isFormative ? null : parseFloat(document.getElementById("psv").value);

            // Helper function to calculate grade
            function getGPA(score) {
                if (score >= 80) return 4.00;
                if (score >= 75) return 3.75;
                if (score >= 70) return 3.50;
                if (score >= 65) return 3.25;
                if (score >= 60) return 3.00;
                if (score >= 55) return 2.75;
                if (score >= 50) return 2.50;
                if (score >= 45) return 2.25;
                if (score >= 40) return 2.00;
                if (score >= 35) return 1.00;
                return 0.00;
            }

            // Calculate GPA for each subject
            let bm = getGPA(melayu) * 5.00;
            let bi = getGPA(inggeris) * 5.00;
            let mt = getGPA(math) * 5.00;
            let sn = getGPA(sci) * 5.00;
            let rbt = getGPA(reka) * 4.00;
            let pai = getGPA(islam) * 4.00;
            let sej = getGPA(sj) * 3.00;
            let geo = getGPA(geog) * 3.00;
            let Ask = getGPA(ask) * 2.00;
            
            let Seni = getGPA(psv) * 2.00;
            totalSubjects = 38;
            additionalMarks = Ask + Seni;

           
            if (!isFormative) {
                let totalSubjects = 34;
                let additionalMarks = "";

            }

            let total = bm + bi + mt + sn + rbt + pai + sej + geo + (additionalMarks || 0);
            let purata = total / totalSubjects;

            // Display result
            document.getElementById("result").innerHTML = "PNG anda ialah: " + purata.toFixed(2);

            // Motivational message
            let message = "";
            if (purata === 4.00) {
                message = "Tahniah " + nama + "!, Anda mendapat pointer 4.00. Kekalkan prestasi anda.";
            } else if (purata >= 3.50) {
                message = "Tahniah " + nama + "!, Teruskan usaha anda.";
            } else if (purata >= 3.00) {
                message = "Anda sudah lakukan yang terbaik, " + nama + "! Cuba Lagi dalam ujian seterusnya.";
            } else {
                message = "Jangan putus asa, " + nama + ". Teruskan berusaha dengan lebih gigih.";
            }
            document.getElementById("message").innerHTML = message;
        }
    </script>
</head>
<body>
    <h1>Kalkulator Purata Nilai Gred MRSM ðŸŽ“</h1>
    <p>Sila tulis mengikut ejaan yang betul dan tepat</p>

    <label>Adakah ini Ujian Formatif?</label>
    <input type="radio" id="formative-yes" name="formative" value="Tidak" checked onclick="toggleExtraFields(false)"> Tidak
    <input type="radio" id="formative-no" name="formative" value="Ya" onclick="toggleExtraFields(true)"> Ya

    <br><br>

    <label for="nama">Sila masukkan nama pendek anda:</label>
    <input type="text" id="nama">

    <h3>Masukkan Markah</h3>
    <label for="melayu">BM:</label>
    <input type="number" id="melayu"><br>
    <label for="inggeris">BI:</label>
    <input type="number" id="inggeris"><br>
    <label for="math">MT:</label>
    <input type="number" id="math"><br>
    <label for="sci">SN:</label>
    <input type="number" id="sci"><br>
    <label for="reka">RBT:</label>
    <input type="number" id="reka"><br>
    <label for="islam">PAI:</label>
    <input type="number" id="islam"><br>
    <label for="sj">Sejarah:</label>
    <input type="number" id="sj"><br>
    <label for="geog">Geografi:</label>
    <input type="number" id="geog"><br>

    <!-- These fields will be hidden if it's a formative test -->
    <div id="extra-fields" style="display:none;">
        <label for="psv">Seni:</label>
        <input type="number" id="psv"><br>
        <label for="ask">PJ:</label>
        <input type="number" id="ask"><br>
    </div>

    <br>
    <button onclick="calculatePNG(document.getElementById('formative-no').checked)">Kira PNG</button>

    <h3>Keputusan:</h3>
    <p id="result"></p>
    <p id="message"></p>

    <script>
        function toggleExtraFields(show) {
            document.getElementById('extra-fields').style.display = show ? 'block' : 'none';
        }
    </script>
</body>
</html>
